!function(){function t(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],s=!0,r=!1,n=void 0;try{for(var o,a=t[Symbol.iterator]();!(s=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(h){r=!0,n=h}finally{try{s||null==a.return||a.return()}finally{if(r)throw n}}return i}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function r(t,e,i){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=a(t,e);if(s){var r=Object.getOwnPropertyDescriptor(s,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function n(t,e,i,s){return(n="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,i,s){var r,n=a(t,e);if(n){if((r=Object.getOwnPropertyDescriptor(n,e)).set)return r.set.call(s,i),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(s,e)){if(!r.writable)return!1;r.value=i,Object.defineProperty(s,e,r)}else!function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(s,e,i);return!0})(t,e,i,s)}function o(t,e,i,s,r){if(!n(t,e,i,s||t)&&r)throw new Error("failed to set property");return i}function a(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=c(t);if(e){var r=c(this).constructor;i=Reflect.construct(s,arguments,r)}else i=s.apply(this,arguments);return d(this,i)}}function d(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function u(t,e,i){return e&&m(t.prototype,e),i&&m(t,i),t}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"D+TT":function(i,s,n){"use strict";n.r(s),n.d(s,"DashboardingDocModule",(function(){return Je}));var a=n("2kYt"),d=n("EM62");function m(t,e){if(1&t&&d["\u0275\u0275element"](0,"div",3),2&t){var i=e.index,s=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("ngStyle",s.gridRenderer.getGridColumnStyle(i))}}function g(t,e){if(1&t&&d["\u0275\u0275element"](0,"div",4),2&t){var i=e.index,s=d["\u0275\u0275nextContext"]();d["\u0275\u0275property"]("ngStyle",s.gridRenderer.getGridRowStyle(i))}}var f=["*"];function y(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",8),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function v(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",9),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function b(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",10),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function w(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",11),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function I(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",12),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function C(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",13),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function x(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",14),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function $(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",15),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}var k,S,z,T,P,R,O,E,D,M,j,W,F,L,_,V=function t(){p(this,t)},A=function(t){return t.Fit="fit",t.ScrollVertical="scrollVertical",t.ScrollHorizontal="scrollHorizontal",t.Fixed="fixed",t.VerticalFixed="verticalFixed",t.HorizontalFixed="horizontalFixed",t}({}),H=function(t){return t.Always="always",t.OnDragAndResize="onDrag&Resize",t.None="none",t}({}),B=function(t){return t.None="none",t.CompactUp="compactUp",t.CompactLeft="compactLeft",t.CompactUpAndLeft="compactUp&Left",t.CompactLeftAndUp="compactLeft&Up",t.CompactRight="compactRight",t.CompactUpAndRight="compactUp&Right",t.CompactRightAndUp="compactRight&Up",t}({}),X=function(t){return t.LTR="ltr",t.RTL="rtl",t}({}),Y=((k=function(){function t(e){p(this,t),this.gridster=e}return u(t,[{key:"destroy",value:function(){delete this.gridster}},{key:"checkCompact",value:function(){this.gridster.$options.compactType!==B.None&&(this.gridster.$options.compactType===B.CompactUp?this.checkCompactUp():this.gridster.$options.compactType===B.CompactLeft?this.checkCompactLeft():this.gridster.$options.compactType===B.CompactUpAndLeft?(this.checkCompactUp(),this.checkCompactLeft()):this.gridster.$options.compactType===B.CompactLeftAndUp?(this.checkCompactLeft(),this.checkCompactUp()):this.gridster.$options.compactType===B.CompactRight?this.checkCompactRight():this.gridster.$options.compactType===B.CompactUpAndRight?(this.checkCompactUp(),this.checkCompactRight()):this.gridster.$options.compactType===B.CompactRightAndUp&&(this.checkCompactRight(),this.checkCompactUp()))}},{key:"checkCompactItem",value:function(t){this.gridster.$options.compactType!==B.None&&(this.gridster.$options.compactType===B.CompactUp?this.moveUpTillCollision(t):this.gridster.$options.compactType===B.CompactLeft?this.moveLeftTillCollision(t):this.gridster.$options.compactType===B.CompactUpAndLeft?(this.moveUpTillCollision(t),this.moveLeftTillCollision(t)):this.gridster.$options.compactType===B.CompactLeftAndUp?(this.moveLeftTillCollision(t),this.moveUpTillCollision(t)):this.gridster.$options.compactType===B.CompactUpAndRight&&(this.moveUpTillCollision(t),this.moveRightTillCollision(t)))}},{key:"checkCompactUp",value:function(){for(var t,e=!1,i=this.gridster.grid.length,s=0;s<i;s++)!1!==(t=this.gridster.grid[s]).$item.compactEnabled&&this.moveUpTillCollision(t.$item)&&(e=!0,t.item.y=t.$item.y,t.itemChanged());e&&this.checkCompact()}},{key:"moveUpTillCollision",value:function(t){return t.y-=1,this.gridster.checkCollision(t)?(t.y+=1,!1):(this.moveUpTillCollision(t),!0)}},{key:"checkCompactLeft",value:function(){for(var t,e=!1,i=this.gridster.grid.length,s=0;s<i;s++)!1!==(t=this.gridster.grid[s]).$item.compactEnabled&&this.moveLeftTillCollision(t.$item)&&(e=!0,t.item.x=t.$item.x,t.itemChanged());e&&this.checkCompact()}},{key:"checkCompactRight",value:function(){for(var t,e=!1,i=this.gridster.grid.length,s=0;s<i;s++)!1!==(t=this.gridster.grid[s]).$item.compactEnabled&&this.moveRightTillCollision(t.$item)&&(e=!0,t.item.x=t.$item.x,t.itemChanged());e&&this.checkCompact()}},{key:"moveLeftTillCollision",value:function(t){return t.x-=1,this.gridster.checkCollision(t)?(t.x+=1,!1):(this.moveLeftTillCollision(t),!0)}},{key:"moveRightTillCollision",value:function(t){return t.x+=1,this.gridster.checkCollision(t)?(t.x-=1,!1):(this.moveRightTillCollision(t),!0)}}]),t}()).\u0275fac=function(t){return new(t||k)(d["\u0275\u0275inject"](V))},k.\u0275prov=d["\u0275\u0275defineInjectable"]({token:k,factory:k.\u0275fac}),k),N={gridType:A.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:B.None,mobileBreakpoint:640,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:H.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,disableAutoPositionOnConflict:!1,dirType:X.LTR},G=((P=function(){function t(){p(this,t)}return u(t,null,[{key:"merge",value:function(e,i,s){for(var r in i)void 0!==i[r]&&s.hasOwnProperty(r)&&(e[r]="object"==typeof i[r]?t.merge(e[r],i[r],s[r]):i[r]);return e}},{key:"debounce",value:function(t,e){var i;return function(){var s=this,r=arguments,n=function(){i=void 0,t.apply(s,r)};clearTimeout(i),i=setTimeout(n,e)}}},{key:"checkTouchEvent",value:function(t){void 0===t.clientX&&t.touches&&(t.touches&&t.touches.length?(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY):t.changedTouches&&t.changedTouches.length&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY))}},{key:"checkContentClassForEvent",value:function(e,i){if(e.$options.draggable.ignoreContent){if(!t.checkDragHandleClass(i.target,i.currentTarget,e.$options.draggable.dragHandleClass,e.$options.draggable.ignoreContentClass))return!0}else if(t.checkContentClass(i.target,i.currentTarget,e.$options.draggable.ignoreContentClass))return!0;return!1}},{key:"checkContentClassForEmptyCellClickEvent",value:function(e,i){return t.checkContentClass(i.target,i.currentTarget,e.$options.draggable.ignoreContentClass)||t.checkContentClass(i.target,i.currentTarget,e.$options.draggable.dragHandleClass)}},{key:"checkDragHandleClass",value:function(e,i,s,r){if(!e||e===i)return!1;if(e.hasAttribute("class")){var n=e.getAttribute("class").split(" ");if(n.indexOf(s)>-1)return!0;if(n.indexOf(r)>-1)return!1}return t.checkDragHandleClass(e.parentNode,i,s,r)}},{key:"checkContentClass",value:function(e,i,s){return!(!e||e===i)&&(!!(e.hasAttribute("class")&&e.getAttribute("class").split(" ").indexOf(s)>-1)||t.checkContentClass(e.parentNode,i,s))}},{key:"compareItems",value:function(t,e){return t.y>e.y?-1:t.y<e.y?1:t.x>e.x?-1:1}}]),t}()).\u0275fac=function(t){return new(t||P)},P.\u0275prov=d["\u0275\u0275defineInjectable"]({token:P,factory:P.\u0275fac}),P),U=((T=function(){function t(e){p(this,t),this.gridster=e}return u(t,[{key:"destroy",value:function(){delete this.initialItem,delete this.gridster.movingItem,this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridster,this.emptyCellExit&&(this.emptyCellExit(),this.emptyCellExit=null)}},{key:"updateOptions",value:function(){var t=this;this.gridster.$options.enableEmptyCellClick&&!this.emptyCellClick&&this.gridster.options.emptyCellClickCallback?(this.emptyCellClick=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb.bind(this)),this.emptyCellClickTouch=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb.bind(this))):!this.gridster.$options.enableEmptyCellClick&&this.emptyCellClick&&this.emptyCellClickTouch&&(this.emptyCellClick(),this.emptyCellClickTouch(),this.emptyCellClick=null,this.emptyCellClickTouch=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.emptyCellContextMenu&&this.gridster.options.emptyCellContextMenuCallback?this.emptyCellContextMenu=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb.bind(this)):!this.gridster.$options.enableEmptyCellContextMenu&&this.emptyCellContextMenu&&(this.emptyCellContextMenu(),this.emptyCellContextMenu=null),this.gridster.$options.enableEmptyCellDrop&&!this.emptyCellDrop&&this.gridster.options.emptyCellDropCallback?(this.emptyCellDrop=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop.bind(this)),this.gridster.zone.runOutsideAngular((function(){t.emptyCellMove=t.gridster.renderer.listen(t.gridster.el,"dragover",t.emptyCellDragOver.bind(t))})),this.emptyCellExit=this.gridster.renderer.listen("document","dragend",(function(){t.gridster.movingItem=null,t.gridster.previewStyle()}))):!this.gridster.$options.enableEmptyCellDrop&&this.emptyCellDrop&&this.emptyCellMove&&this.emptyCellExit&&(this.emptyCellDrop(),this.emptyCellMove(),this.emptyCellExit(),this.emptyCellMove=null,this.emptyCellDrop=null,this.emptyCellExit=null),this.gridster.$options.enableEmptyCellDrag&&!this.emptyCellDrag&&this.gridster.options.emptyCellDragCallback?(this.emptyCellDrag=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown.bind(this)),this.emptyCellDragTouch=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown.bind(this))):!this.gridster.$options.enableEmptyCellDrag&&this.emptyCellDrag&&this.emptyCellDragTouch&&(this.emptyCellDrag(),this.emptyCellDragTouch(),this.emptyCellDrag=null,this.emptyCellDragTouch=null)}},{key:"emptyCellClickCb",value:function(t){if(!this.gridster.movingItem&&!G.checkContentClassForEmptyCellClickEvent(this.gridster,t)){var e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(t,e),this.gridster.cdRef.markForCheck())}}},{key:"emptyCellContextMenuCb",value:function(t){if(!this.gridster.movingItem&&!G.checkContentClassForEmptyCellClickEvent(this.gridster,t)){t.preventDefault(),t.stopPropagation();var e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(t,e),this.gridster.cdRef.markForCheck())}}},{key:"emptyCellDragDrop",value:function(t){var e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(t,e),this.gridster.cdRef.markForCheck())}},{key:"emptyCellDragOver",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.getValidItemFromEvent(t);e?(t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.gridster.movingItem=e):(t.dataTransfer&&(t.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()}},{key:"emptyCellMouseDown",value:function(t){var e=this;if(!G.checkContentClassForEmptyCellClickEvent(this.gridster,t)){t.preventDefault(),t.stopPropagation();var i=this.getValidItemFromEvent(t);i&&1===t.buttons&&(this.initialItem=i,this.gridster.movingItem=i,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular((function(){e.emptyCellMMove=e.gridster.renderer.listen("window","mousemove",e.emptyCellMouseMove.bind(e)),e.emptyCellMMoveTouch=e.gridster.renderer.listen("window","touchmove",e.emptyCellMouseMove.bind(e))})),this.emptyCellUp=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp.bind(this)),this.emptyCellUpTouch=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp.bind(this)))}}},{key:"emptyCellMouseMove",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.getValidItemFromEvent(t,this.initialItem);e&&(this.gridster.movingItem=e,this.gridster.previewStyle())}},{key:"emptyCellMouseUp",value:function(t){var e=this;this.emptyCellMMove(),this.emptyCellMMoveTouch(),this.emptyCellUp(),this.emptyCellUpTouch();var i=this.getValidItemFromEvent(t,this.initialItem);i&&(this.gridster.movingItem=i),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(t,this.gridster.movingItem),setTimeout((function(){e.initialItem=null,e.gridster&&(e.gridster.movingItem=null,e.gridster.previewStyle())})),this.gridster.cdRef.markForCheck()}},{key:"getPixelsX",value:function(t,e){var i=this.gridster.options.scale;return i?(t.clientX-e.left)/i+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():t.clientX+this.gridster.el.scrollLeft-e.left-this.gridster.gridRenderer.getLeftMargin()}},{key:"getPixelsY",value:function(t,e){var i=this.gridster.options.scale;return i?(t.clientY-e.top)/i+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():t.clientY+this.gridster.el.scrollTop-e.top-this.gridster.gridRenderer.getTopMargin()}},{key:"getValidItemFromEvent",value:function(t,e){t.preventDefault(),t.stopPropagation(),G.checkTouchEvent(t);var i=this.gridster.el.getBoundingClientRect(),s=this.getPixelsX(t,i),r=this.getPixelsY(t,i),n={x:this.gridster.pixelsToPositionX(s,Math.floor,!0),y:this.gridster.pixelsToPositionY(r,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(e&&(n.cols=Math.min(Math.abs(e.x-n.x)+1,this.gridster.$options.emptyCellDragMaxCols),n.rows=Math.min(Math.abs(e.y-n.y)+1,this.gridster.$options.emptyCellDragMaxRows),e.x<n.x?n.x=e.x:e.x-n.x>this.gridster.$options.emptyCellDragMaxCols-1&&(n.x=this.gridster.movingItem?this.gridster.movingItem.x:0),e.y<n.y?n.y=e.y:e.y-n.y>this.gridster.$options.emptyCellDragMaxRows-1&&(n.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(n))return n}}]),t}()).\u0275fac=function(t){return new(t||T)(d["\u0275\u0275inject"](V))},T.\u0275prov=d["\u0275\u0275defineInjectable"]({token:T,factory:T.\u0275fac}),T),J=((z=function(){function t(e){p(this,t),this.gridster=e}return u(t,[{key:"destroy",value:function(){delete this.gridster}},{key:"updateItem",value:function(t,e,i){if(this.gridster.mobile)this.clearCellPosition(i,t),i.setStyle(t,"height",this.gridster.$options.keepFixedHeightInMobile?e.rows*this.gridster.$options.fixedRowHeight+"px":e.rows*this.gridster.curWidth/e.cols+"px"),i.setStyle(t,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),i.setStyle(t,"margin-bottom",this.gridster.$options.margin+"px"),i.setStyle(t,X.LTR?"margin-right":"margin-left","");else{var s=Math.round(this.gridster.curColWidth*e.x),r=Math.round(this.gridster.curRowHeight*e.y),n=this.gridster.curColWidth*e.cols-this.gridster.$options.margin,o=this.gridster.curRowHeight*e.rows-this.gridster.$options.margin;this.setCellPosition(i,t,s,r),i.setStyle(t,"width",n+"px"),i.setStyle(t,"height",o+"px");var a=null,h=null;this.gridster.$options.outerMargin&&(this.gridster.rows===e.rows+e.y&&(a=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===e.cols+e.x&&(h=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),i.setStyle(t,"margin-bottom",a),i.setStyle(t,X.LTR?"margin-right":"margin-left",h)}}},{key:"updateGridster",value:function(){var t="",e="",i="",s="";this.gridster.$options.gridType===A.Fit?(t=A.Fit,e=A.ScrollVertical,i=A.ScrollHorizontal,s=A.Fixed):this.gridster.$options.gridType===A.ScrollVertical?(this.gridster.curRowHeight=this.gridster.curColWidth,t=A.ScrollVertical,e=A.Fit,i=A.ScrollHorizontal,s=A.Fixed):this.gridster.$options.gridType===A.ScrollHorizontal?(this.gridster.curColWidth=this.gridster.curRowHeight,t=A.ScrollHorizontal,e=A.Fit,i=A.ScrollVertical,s=A.Fixed):this.gridster.$options.gridType===A.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=A.Fixed,e=A.Fit,i=A.ScrollVertical,s=A.ScrollHorizontal):this.gridster.$options.gridType===A.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=A.ScrollVertical,e=A.Fit,i=A.ScrollHorizontal,s=A.Fixed):this.gridster.$options.gridType===A.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=A.ScrollHorizontal,e=A.Fit,i=A.ScrollVertical,s=A.Fixed),this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==A.Fit?this.gridster.renderer.removeClass(this.gridster.el,t):this.gridster.renderer.addClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,i),this.gridster.renderer.removeClass(this.gridster.el,s)}},{key:"getGridColumnStyle",value:function(t){return Object.assign(Object.assign({},this.getLeftPosition(this.gridster.curColWidth*t)),{width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}},{key:"getGridRowStyle",value:function(t){return Object.assign(Object.assign({},this.getTopPosition(this.gridster.curRowHeight*t)),{width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"})}},{key:"getLeftPosition",value:function(t){var e=this.gridster.$options.dirType===X.RTL?-t:t;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+e+"px)"}:{left:this.getLeftMargin()+e+"px"}}},{key:"getTopPosition",value:function(t){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+t+"px)"}:{top:this.getTopMargin()+t+"px"}}},{key:"clearCellPosition",value:function(t,e){this.gridster.$options.useTransformPositioning?t.setStyle(e,"transform",""):(t.setStyle(e,"top",""),t.setStyle(e,"left",""))}},{key:"setCellPosition",value:function(t,e,i,s){var r=this.gridster.$options.dirType===X.RTL?-i:i;this.gridster.$options.useTransformPositioning?t.setStyle(e,"transform","translate3d("+r+"px, "+s+"px, 0)"):(t.setStyle(e,"left",this.getLeftMargin()+r+"px"),t.setStyle(e,"top",this.getTopMargin()+s+"px"))}},{key:"getLeftMargin",value:function(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}},{key:"getTopMargin",value:function(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}]),t}()).\u0275fac=function(t){return new(t||z)(d["\u0275\u0275inject"](V))},z.\u0275prov=d["\u0275\u0275defineInjectable"]({token:z,factory:z.\u0275fac}),z),Z=((S=function(){function t(e,i,s,r){p(this,t),this.renderer=i,this.cdRef=s,this.zone=r,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.el=e.nativeElement,this.$options=JSON.parse(JSON.stringify(N)),this.calculateLayoutDebounce=G.debounce(this.calculateLayout.bind(this),0),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new U(this),this.compact=new Y(this),this.gridRenderer=new J(this)}return u(t,[{key:"checkCollisionTwoItems",value:function(t,e){if(!(t.x<e.x+e.cols&&t.x+t.cols>e.x&&t.y<e.y+e.rows&&t.y+t.rows>e.y))return!1;if(!this.$options.allowMultiLayer)return!0;var i=this.$options.defaultLayerIndex;return(void 0===t.layerIndex?i:t.layerIndex)===(void 0===e.layerIndex?i:e.layerIndex)}},{key:"ngOnInit",value:function(){this.options.initCallback&&this.options.initCallback(this)}},{key:"ngOnChanges",value:function(t){var e=this;t.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged.bind(this),resize:this.onResize.bind(this),getNextPossiblePosition:this.getNextPossiblePosition.bind(this),getFirstPossiblePosition:this.getFirstPossiblePosition.bind(this),getLastPossiblePosition:this.getLastPossiblePosition.bind(this),getItemComponent:function(t){return e.getItemComponent(t)}},this.columns=this.$options.minCols,this.rows=this.$options.minRows,this.setGridSize(),this.calculateLayout())}},{key:"resize",value:function(){var t,e;"fit"!==this.$options.gridType||this.mobile?(e=this.el.clientWidth,t=this.el.clientHeight):(e=this.el.offsetWidth,t=this.el.offsetHeight),e===this.curWidth&&t===this.curHeight||!this.checkIfToResize()||this.onResize()}},{key:"setOptions",value:function(){this.$options=G.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize.bind(this)),this.emptyCell.updateOptions()}},{key:"optionsChanged",value:function(){this.setOptions();for(var t=this.grid.length-1;t>=0;t--)this.grid[t].updateOptions();this.calculateLayout()}},{key:"ngOnDestroy",value:function(){this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),delete this.emptyCell,this.compact.destroy(),delete this.compact}},{key:"onResize",value:function(){this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout()}},{key:"checkIfToResize",value:function(){var t=this.el.clientWidth,e=this.el.offsetWidth,i=this.el.scrollWidth,s=this.el.clientHeight,r=this.el.offsetHeight,n=this.el.scrollHeight;return!(t<e&&n>r&&n-r<e-t||s<r&&i>e&&i-e<r-s)}},{key:"setGridSize",value:function(){var t,e,i=this.el;this.$options.setGridSize||this.$options.gridType===A.Fit&&!this.mobile?(t=i.offsetWidth,e=i.offsetHeight):(t=i.clientWidth,e=i.clientHeight),this.curWidth=t,this.curHeight=e}},{key:"setGridDimensions",value:function(){this.setGridSize(),!this.mobile&&this.$options.mobileBreakpoint>this.curWidth?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&this.$options.mobileBreakpoint<this.curWidth&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));for(var t,e=this.$options.minRows,i=this.$options.minCols,s=this.grid.length-1;s>=0;s--)(t=this.grid[s]).notPlaced||(e=Math.max(e,t.$item.y+t.$item.rows),i=Math.max(i,t.$item.x+t.$item.cols));this.columns===i&&this.rows===e||(this.columns=i,this.rows=e,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}},{key:"calculateLayout",value:function(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){var t=-this.$options.margin;null!==this.$options.outerMarginLeft?(t+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(t+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-t)/this.columns;var e=-this.$options.margin;null!==this.$options.outerMarginTop?(e+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(e+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-e)/this.rows}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();for(var i,s=this.grid.length-1;s>=0;s--)(i=this.grid[s]).setSize(),i.drag.toggle(),i.resize.toggle();setTimeout(this.resize.bind(this),100)}},{key:"updateGrid",value:function(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):"none"!==this.$options.displayGrid&&this.dragInProgress&&!this.mobile||this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=t.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=t.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}},{key:"addItem",value:function(t){void 0===t.$item.cols&&(t.$item.cols=this.$options.defaultItemCols,t.item.cols=t.$item.cols,t.itemChanged()),void 0===t.$item.rows&&(t.$item.rows=this.$options.defaultItemRows,t.item.rows=t.$item.rows,t.itemChanged()),-1===t.$item.x||-1===t.$item.y?this.autoPositionItem(t):this.checkCollision(t.$item)&&(this.$options.disableWarnings||(t.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(t.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?t.notPlaced=!0:this.autoPositionItem(t)),this.grid.push(t),this.calculateLayoutDebounce()}},{key:"removeItem",value:function(t){this.grid.splice(this.grid.indexOf(t),1),this.calculateLayoutDebounce(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(t.item,t)}},{key:"checkCollision",value:function(t){var e=!1;if(this.options.itemValidateCallback&&(e=!this.options.itemValidateCallback(t)),!e&&this.checkGridCollision(t)&&(e=!0),!e){var i=this.findItemWithItem(t);i&&(e=i)}return e}},{key:"checkGridCollision",value:function(t){var e=t.cols*t.rows;return!(t.y>-1&&t.x>-1&&t.cols+t.x<=this.$options.maxCols&&t.rows+t.y<=this.$options.maxRows&&t.cols<=(void 0===t.maxItemCols?this.$options.maxItemCols:t.maxItemCols)&&t.cols>=(void 0===t.minItemCols?this.$options.minItemCols:t.minItemCols)&&t.rows<=(void 0===t.maxItemRows?this.$options.maxItemRows:t.maxItemRows)&&t.rows>=(void 0===t.minItemRows?this.$options.minItemRows:t.minItemRows)&&(void 0===t.minItemArea?this.$options.minItemArea:t.minItemArea)<=e&&(void 0===t.maxItemArea?this.$options.maxItemArea:t.maxItemArea)>=e)}},{key:"findItemWithItem",value:function(t){for(var e,i=0;i<this.grid.length;i++)if((e=this.grid[i]).$item!==t&&this.checkCollisionTwoItems(e.$item,t))return e;return!1}},{key:"findItemsWithItem",value:function(t){for(var e,i=[],s=0;s<this.grid.length;s++)(e=this.grid[s]).$item!==t&&this.checkCollisionTwoItems(e.$item,t)&&i.push(e);return i}},{key:"autoPositionItem",value:function(t){this.getNextPossiblePosition(t.$item)?(t.notPlaced=!1,t.item.x=t.$item.x,t.item.y=t.$item.y,t.itemChanged()):(t.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(t.item,["cols","rows","x","y"])))}},{key:"getNextPossiblePosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};-1===t.cols&&(t.cols=this.$options.defaultItemCols),-1===t.rows&&(t.rows=this.$options.defaultItemRows),this.setGridDimensions();for(var i,s=e.y||0;s<this.rows;s++)for(t.y=s,i=e.x||0;i<this.columns;i++)if(t.x=i,!this.checkCollision(t))return!0;var r=this.$options.maxRows>=this.rows+t.rows;return!(this.rows<=this.columns&&r)&&this.$options.maxCols>=this.columns+t.cols?(t.x=this.columns,t.y=0,!0):!!r&&(t.y=this.rows,t.x=0,!0)}},{key:"getFirstPossiblePosition",value:function(t){var e=Object.assign({},t);return this.getNextPossiblePosition(e),e}},{key:"getLastPossiblePosition",value:function(t){var e={y:0,x:0};e=this.grid.reduce((function(t,e){var i={y:e.$item.y+e.$item.rows-1,x:e.$item.x+e.$item.cols-1};return 1===G.compareItems(t,i)?i:t}),e);var i=Object.assign({},t);return this.getNextPossiblePosition(i,e),i}},{key:"pixelsToPositionX",value:function(t,e,i){var s=e(t/this.curColWidth);return i?s:Math.max(s,0)}},{key:"pixelsToPositionY",value:function(t,e,i){var s=e(t/this.curRowHeight);return i?s:Math.max(s,0)}},{key:"positionXToPixels",value:function(t){return t*this.curColWidth}},{key:"positionYToPixels",value:function(t){return t*this.curRowHeight}},{key:"getItemComponent",value:function(t){return this.grid.find((function(e){return e.item===t}))}},{key:"checkCollisionForSwaping",value:function(t){var e=!1;if(this.options.itemValidateCallback&&(e=!this.options.itemValidateCallback(t)),!e&&this.checkGridCollision(t)&&(e=!0),!e){var i=this.findItemWithItemForSwaping(t);i&&(e=i)}return e}},{key:"findItemWithItemForSwaping",value:function(e){for(var i,s=this.grid.length-1;s>-1;s--)if((i=this.grid[s]).$item!==e&&t.checkCollisionTwoItemsForSwaping(i.$item,e))return i;return!1}}],[{key:"checkCollisionTwoItemsForSwaping",value:function(t,e){return t.x+(1===t.cols?0:1)<e.x+e.cols&&t.x+t.cols>e.x+(1===e.cols?0:1)&&t.y+(1===t.rows?0:1)<e.y+e.rows&&t.y+t.rows>e.y+(1===e.rows?0:1)}},{key:"getNewArrayLength",value:function(t,e,i){var s=Math.max(t,Math.floor(e/i));return s<0?0:Number.isFinite(s)?Math.floor(s):0}}]),t}()).\u0275fac=function(t){return new(t||S)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](d.Renderer2),d["\u0275\u0275directiveInject"](d.ChangeDetectorRef),d["\u0275\u0275directiveInject"](d.NgZone))},S.\u0275cmp=d["\u0275\u0275defineComponent"]({type:S,selectors:[["gridster"]],inputs:{options:"options"},features:[d["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:f,decls:4,vars:2,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(t,e){1&t&&(d["\u0275\u0275projectionDef"](),d["\u0275\u0275template"](0,m,1,1,"div",0),d["\u0275\u0275template"](1,g,1,1,"div",1),d["\u0275\u0275projection"](2),d["\u0275\u0275element"](3,"gridster-preview",2)),2&t&&(d["\u0275\u0275property"]("ngForOf",e.gridColumns),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",e.gridRows))},directives:function(){return[a.k,It,a.m]},styles:["gridster{-ms-user-select:none;-webkit-user-select:none;background:grey;box-sizing:border-box;display:block;height:100%;position:relative;user-select:none;width:100%}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:auto;width:auto}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{box-sizing:border-box;display:none;position:absolute;transition:.3s}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid #fff;border-right:1px solid #fff}gridster .gridster-row{border-bottom:1px solid #fff;border-top:1px solid #fff}"],encapsulation:2}),S),q=function t(){p(this,t)},K=((_=function(){function t(e){p(this,t),this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=e,this.gridster=e.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}return u(t,[{key:"destroy",value:function(){delete this.gridster,delete this.gridsterItem}},{key:"pushItems",value:function(t,e){if(this.gridster.$options.pushItems&&!e){this.pushedItemsOrder=[],this.iteration=0;var i=this.push(this.gridsterItem,t);return i||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],i}return!1}},{key:"restoreTempItems",value:function(){for(var t=this.pushedItemsTemp.length-1;t>-1;t--)this.removeFromTempPushed(this.pushedItemsTemp[t])}},{key:"restoreItems",value:function(){for(var t,e=0,i=this.pushedItems.length;e<i;e++)(t=this.pushedItems[e]).$item.x=t.item.x||0,t.$item.y=t.item.y||0,t.setSize();this.pushedItems=[],this.pushedItemsPath=[]}},{key:"setPushedItems",value:function(){for(var t,e=0,i=this.pushedItems.length;e<i;e++)(t=this.pushedItems[e]).checkItemChanges(t.$item,t.item);this.pushedItems=[],this.pushedItemsPath=[]}},{key:"checkPushBack",value:function(){for(var t=this.pushedItems.length-1,e=!1;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}},{key:"push",value:function(t,e){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(t.$item))return!1;if(""===e)return!1;var i=this.gridster.findItemsWithItem(t.$item),s=e===this.fromNorth||e===this.fromWest;i.sort((function(t,e){return s?e.$item.y-t.$item.y||e.$item.x-t.$item.x:t.$item.y-e.$item.y||t.$item.x-e.$item.x}));for(var r,n=0,o=!0,a=[];n<i.length;n++)if((r=i[n])!==this.gridsterItem){if(!r.canBeDragged()){o=!1;break}var h=this.pushedItemsTemp.indexOf(r);if(h>-1&&this.pushedItemsTempPath[h].length>10){o=!1;break}if(this.tryPattern[e][0].call(this,r,t))this.pushedItemsOrder.push(r),a.push(r);else if(this.tryPattern[e][1].call(this,r,t))this.pushedItemsOrder.push(r),a.push(r);else if(this.tryPattern[e][2].call(this,r,t))this.pushedItemsOrder.push(r),a.push(r);else{if(!this.tryPattern[e][3].call(this,r,t)){o=!1;break}this.pushedItemsOrder.push(r),a.push(r)}}if(!o&&(n=this.pushedItemsOrder.lastIndexOf(a[0]))>-1)for(var l=this.pushedItemsOrder.length-1;l>=n;l--)r=this.pushedItemsOrder[l],this.pushedItemsOrder.pop(),this.removeFromTempPushed(r),this.removeFromPushedItem(r);return this.iteration++,o}},{key:"trySouth",value:function(t,e){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(t),t.$item.y=e.$item.y+e.$item.rows,this.push(t,this.fromNorth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"tryNorth",value:function(t,e){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(t),t.$item.y=e.$item.y-t.$item.rows,this.push(t,this.fromSouth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"tryEast",value:function(t,e){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(t),t.$item.x=e.$item.x+e.$item.cols,this.push(t,this.fromWest)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"tryWest",value:function(t,e){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(t),t.$item.x=e.$item.x-t.$item.cols,this.push(t,this.fromEast)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}},{key:"addToTempPushed",value:function(t){var e=this.pushedItemsTemp.indexOf(t);-1===e&&(e=this.pushedItemsTemp.push(t)-1,this.pushedItemsTempPath[e]=[]),this.pushedItemsTempPath[e].push({x:t.$item.x,y:t.$item.y})}},{key:"removeFromTempPushed",value:function(t){var e=this.pushedItemsTemp.indexOf(t),i=this.pushedItemsTempPath[e].pop();i&&(t.$item.x=i.x,t.$item.y=i.y,t.setSize(),this.pushedItemsTempPath[e].length||(this.pushedItemsTemp.splice(e,1),this.pushedItemsTempPath.splice(e,1)))}},{key:"addToPushed",value:function(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0},{x:t.$item.x,y:t.$item.y}]);else{var e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y})}}},{key:"removeFromPushed",value:function(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}},{key:"removeFromPushedItem",value:function(t){var e=this.pushedItems.indexOf(t);e>-1&&(this.pushedItemsPath[e].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1)))}},{key:"checkPushedItem",value:function(t,e){for(var i,s,r,n=this.pushedItemsPath[e],o=n.length-2,a=!1;o>-1;o--)i=n[o],s=t.$item.x,r=t.$item.y,t.$item.x=i.x,t.$item.y=i.y,this.gridster.findItemWithItem(t.$item)?(t.$item.x=s,t.$item.y=r):(t.setSize(),n.splice(o+1,n.length-o-1),a=!0);return n.length<2&&this.removeFromPushed(e),a}}]),t}()).\u0275fac=function(t){return new(t||_)(d["\u0275\u0275inject"](q))},_.\u0275prov=d["\u0275\u0275defineInjectable"]({token:_,factory:_.\u0275fac}),_);function Q(t,e,i,s,r,n,o,a,h,l){R=t.$options.scrollSensitivity,O=t.$options.scrollSpeed,E=t.el,D=h,M=l;var d=E.offsetWidth,c=E.scrollLeft,m=E.scrollTop,u=i-m;if(!t.$options.disableScrollVertical)if(o.clientY<n.clientY&&E.offsetHeight+m-i-r<R){if(ht(),D&&M&&!M.s||L)return;L=tt(1,a,o)}else if(o.clientY>n.clientY&&m>0&&u<R){if(at(),D&&M&&!M.n||F)return;F=tt(-1,a,o)}else o.clientY!==n.clientY&&rt();var p=e-c;if(!t.$options.disableScrollHorizontal)if(o.clientX<n.clientX&&c+d-e-s<=R){if(ot(),D&&M&&!M.e||j)return;j=et(1,a,o)}else if(o.clientX>n.clientX&&c>0&&p<R){if(nt(),D&&M&&!M.w||W)return;W=et(-1,a,o)}else o.clientX!==n.clientX&&st()}function tt(t,e,i){var s=i.clientY;return setInterval((function(){(!E||-1===t&&E.scrollTop-O<0)&&rt(),E.scrollTop+=t*O,s+=t*O,e({clientX:i.clientX,clientY:s})}),50)}function et(t,e,i){var s=i.clientX;return setInterval((function(){(!E||-1===t&&E.scrollLeft-O<0)&&st(),E.scrollLeft+=t*O,e({clientX:s+=t*O,clientY:i.clientY})}),50)}function it(){st(),rt(),E=null}function st(){nt(),ot()}function rt(){ht(),at()}function nt(){j&&(clearInterval(j),j=0)}function ot(){W&&(clearInterval(W),W=0)}function at(){L&&(clearInterval(L),L=0)}function ht(){F&&(clearInterval(F),F=0)}var lt,dt,ct,mt,ut,pt,gt,ft=((gt=function(){function t(e){p(this,t),this.gridsterItem=e,this.gridster=e.gridster}return u(t,[{key:"destroy",value:function(){delete this.gridster,delete this.gridsterItem,delete this.swapedItem}},{key:"swapItems",value:function(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}},{key:"checkSwapBack",value:function(){if(this.swapedItem){var t=this.swapedItem.$item.x,e=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=t,this.swapedItem.$item.y=e):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}},{key:"restoreSwapItem",value:function(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}},{key:"setSwapItem",value:function(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}},{key:"checkSwap",value:function(t){var e;if((e=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(t.$item):this.gridster.checkCollision(t.$item))&&!0!==e&&e.canBeDragged()){var i=e,s=i.$item.x,r=i.$item.y,n=t.$item.x,o=t.$item.y;i.$item.x=t.item.x||0,i.$item.y=t.item.y||0,t.$item.x=i.item.x||0,t.$item.y=i.item.y||0,this.gridster.checkCollision(i.$item)||this.gridster.checkCollision(t.$item)?(t.$item.x=n,t.$item.y=o,i.$item.x=s,i.$item.y=r):(i.setSize(),this.swapedItem=i,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}]),t}()).\u0275fac=function(t){return new(t||gt)(d["\u0275\u0275inject"](q))},gt.\u0275prov=d["\u0275\u0275defineInjectable"]({token:gt,factory:gt.\u0275fac}),gt),yt=((pt=function(){function t(e,i,s){p(this,t),this.zone=s,this.collision=!1,this.gridsterItem=e,this.gridster=i,this.lastMouse={clientX:0,clientY:0},this.path=[]}return u(t,[{key:"destroy",value:function(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),delete this.gridsterItem,delete this.gridster,delete this.collision,this.mousedown&&(this.mousedown(),this.touchstart())}},{key:"dragStart",value:function(t){var e=this;t.which&&1!==t.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular((function(){e.mousemove=e.gridsterItem.renderer.listen("document","mousemove",e.dragFunction),e.touchmove=e.gridster.renderer.listen(e.gridster.el,"touchmove",e.dragFunction)})),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===X.RTL?t.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:t.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=t.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new K(this.gridsterItem),this.swap=new ft(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}},{key:"dragMove",value:function(t){t.stopPropagation(),t.preventDefault(),G.checkTouchEvent(t),this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Q(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.calculateItemPositionFromMousePosition.bind(this)),this.calculateItemPositionFromMousePosition(t)}},{key:"calculateItemPositionFromMousePosition",value:function(t){var e=this;this.gridster.options.scale?this.calculateItemPositionWithScale(t,this.gridster.options.scale):this.calculateItemPositionWithoutScale(t),this.calculateItemPosition(),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run((function(){e.gridster.updateGrid()}))}},{key:"calculateItemPositionWithScale",value:function(t,e){this.left=this.gridster.$options.dirType===X.RTL?this.gridster.el.scrollWidth-this.originalClientX+(t.clientX-this.originalClientX)/e+this.diffLeft:this.originalClientX+(t.clientX-this.originalClientX)/e+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(t.clientY-this.originalClientY)/e+this.offsetTop-this.diffTop}},{key:"calculateItemPositionWithoutScale",value:function(t){this.left=this.gridster.$options.dirType===X.RTL?this.gridster.el.scrollWidth-t.clientX+this.diffLeft:t.clientX+this.offsetLeft-this.diffLeft,this.top=t.clientY+this.offsetTop-this.diffTop}},{key:"dragStop",value:function(t){var e=this;t.stopPropagation(),t.preventDefault(),it(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeDrag.bind(this),this.cancelDrag.bind(this)):this.makeDrag(),setTimeout((function(){e.gridster&&(e.gridster.movingItem=null,e.gridster.previewStyle(!0))}))}},{key:"cancelDrag",value:function(){this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}},{key:"makeDrag",value:function(){this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}},{key:"calculateItemPosition",value:function(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){var t=this.path[this.path.length-1],e="";t.x<this.gridsterItem.$item.x?e=this.push.fromWest:t.x>this.gridsterItem.$item.x?e=this.push.fromEast:t.y<this.gridsterItem.$item.y?e=this.push.fromNorth:t.y>this.gridsterItem.$item.y&&(e=this.push.fromSouth),this.push.pushItems(e,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}},{key:"toggle",value:function(){var t=this.gridsterItem.canBeDragged();!this.enabled&&t?(this.enabled=!this.enabled,this.dragStartFunction=this.dragStartDelay.bind(this),this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartFunction),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartFunction)):this.enabled&&!t&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}},{key:"dragStartDelay",value:function(t){var e=this;if(!(t.target.hasAttribute("class")&&t.target.getAttribute("class").split(" ").indexOf("gridster-item-resizable-handler")>-1||G.checkContentClassForEvent(this.gridster,t)))if(G.checkTouchEvent(t),this.gridster.$options.draggable.delayStart)var i=setTimeout((function(){e.dragStart(t),l()}),this.gridster.$options.draggable.delayStart),s=this.gridsterItem.renderer.listen("document","mouseup",l),r=this.gridsterItem.renderer.listen("document","mouseleave",l),n=this.gridsterItem.renderer.listen("window","blur",l),o=this.gridsterItem.renderer.listen("document","touchmove",(function(e){G.checkTouchEvent(e),(Math.abs(e.clientX-t.clientX)>9||Math.abs(e.clientY-t.clientY)>9)&&l()})),a=this.gridsterItem.renderer.listen("document","touchend",l),h=this.gridsterItem.renderer.listen("document","touchcancel",l);else this.dragStart(t);function l(){clearTimeout(i),n(),s(),r(),o(),a(),h()}}}]),t}()).\u0275fac=function(t){return new(t||pt)(d["\u0275\u0275inject"](q),d["\u0275\u0275inject"](V),d["\u0275\u0275inject"](d.NgZone))},pt.\u0275prov=d["\u0275\u0275defineInjectable"]({token:pt,factory:pt.\u0275fac}),pt),vt=((ut=function(){function t(e){p(this,t),this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=e,this.gridster=e.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}return u(t,[{key:"destroy",value:function(){delete this.gridster,delete this.gridsterItem}},{key:"pushItems",value:function(t){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,t)}},{key:"restoreItems",value:function(){for(var t,e=0,i=this.pushedItems.length;e<i;e++)(t=this.pushedItems[e]).$item.x=t.item.x||0,t.$item.y=t.item.y||0,t.$item.cols=t.item.cols||1,t.$item.row=t.item.row||1,t.setSize();this.pushedItems=[],this.pushedItemsPath=[]}},{key:"setPushedItems",value:function(){for(var t,e=0,i=this.pushedItems.length;e<i;e++)(t=this.pushedItems[e]).checkItemChanges(t.$item,t.item);this.pushedItems=[],this.pushedItemsPath=[]}},{key:"checkPushBack",value:function(){for(var t=this.pushedItems.length-1,e=!1;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}},{key:"push",value:function(t,e){var i=this.gridster.checkCollision(t.$item);if(i&&!0!==i&&i!==this.gridsterItem&&i.canBeResized()){if(this.tryPattern[e].call(this,i,t,e))return!0}else if(!1===i)return!0;return!1}},{key:"trySouth",value:function(t,e,i){var s=t.$item.y,r=t.$item.rows;return t.$item.y=e.$item.y+e.$item.rows,t.$item.rows=r+s-t.$item.y,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.y=s,t.$item.rows=r,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}},{key:"tryNorth",value:function(t,e,i){var s=t.$item.rows;return t.$item.rows=e.$item.y-t.$item.y,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.rows=s,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}},{key:"tryEast",value:function(t,e,i){var s=t.$item.x,r=t.$item.cols;return t.$item.x=e.$item.x+e.$item.cols,t.$item.cols=r+s-t.$item.x,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.x=s,t.$item.cols=r,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}},{key:"tryWest",value:function(t,e,i){var s=t.$item.cols;return t.$item.cols=e.$item.x-t.$item.x,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.cols=s,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}},{key:"addToPushed",value:function(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0,cols:t.item.cols||0,rows:t.item.rows||0},{x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows}]);else{var e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows})}}},{key:"removeFromPushed",value:function(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}},{key:"checkPushedItem",value:function(t,e){for(var i,s,r,n,o,a=this.pushedItemsPath[e],h=a.length-2;h>-1;h--)i=a[h],s=t.$item.x,r=t.$item.y,n=t.$item.cols,o=t.$item.rows,t.$item.x=i.x,t.$item.y=i.y,t.$item.cols=i.cols,t.$item.rows=i.rows,this.gridster.findItemWithItem(t.$item)?(t.$item.x=s,t.$item.y=r,t.$item.cols=n,t.$item.rows=o):(t.setSize(),a.splice(h+1,a.length-1-h));return a.length<2&&(this.removeFromPushed(e),!0)}}]),t}()).\u0275fac=function(t){return new(t||ut)(d["\u0275\u0275inject"](q))},ut.\u0275prov=d["\u0275\u0275defineInjectable"]({token:ut,factory:ut.\u0275fac}),ut),bt=((mt=function(){function t(e,i,s){p(this,t),this.zone=s,this.gridsterItem=e,this.gridster=i,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={w:!1,e:!1,n:!1,s:!1}}return u(t,[{key:"destroy",value:function(){this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridsterItem,delete this.gridster}},{key:"dragStart",value:function(t){var e,i,s,r=this;t.which&&1!==t.which||(this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular((function(){r.mousemove=r.gridsterItem.renderer.listen("document","mousemove",r.dragFunction),r.touchmove=r.gridster.renderer.listen(r.gridster.el,"touchmove",r.dragFunction)})),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=t.clientX+this.offsetLeft-this.left,this.diffRight=t.clientX+this.offsetLeft-this.right,this.diffTop=t.clientY+this.offsetTop-this.top,this.diffBottom=t.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new K(this.gridsterItem),this.pushResize=new vt(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),(null===(e=t.target)||void 0===e?void 0:e.hasAttribute("class"))&&t.target.getAttribute("class").split(" ").indexOf("handle-n")>-1?(this.resizeEventScrollType.n=!0,this.directionFunction=this.handleN):(null===(i=t.target)||void 0===i?void 0:i.hasAttribute("class"))&&t.target.getAttribute("class").split(" ").indexOf("handle-w")>-1?this.gridster.$options.dirType===X.RTL?(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(null===(s=t.target)||void 0===s?void 0:s.hasAttribute("class"))&&t.target.getAttribute("class").split(" ").indexOf("handle-s")>-1?(this.resizeEventScrollType.s=!0,this.directionFunction=this.handleS):t.target.hasAttribute("class")&&t.target.getAttribute("class").split(" ").indexOf("handle-e")>-1?this.gridster.$options.dirType===X.RTL?(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):t.target.hasAttribute("class")&&t.target.getAttribute("class").split(" ").indexOf("handle-nw")>-1?this.gridster.$options.dirType===X.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):t.target.hasAttribute("class")&&t.target.getAttribute("class").split(" ").indexOf("handle-ne")>-1?this.gridster.$options.dirType===X.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):t.target.hasAttribute("class")&&t.target.getAttribute("class").split(" ").indexOf("handle-sw")>-1?this.gridster.$options.dirType===X.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):t.target.hasAttribute("class")&&t.target.getAttribute("class").split(" ").indexOf("handle-se")>-1&&(this.gridster.$options.dirType===X.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE)))}},{key:"dragMove",value:function(t){var e=this;t.stopPropagation(),t.preventDefault(),G.checkTouchEvent(t),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Q(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.directionFunction.bind(this),!0,this.resizeEventScrollType);var i=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(t.clientX-this.originalClientX)/i,clientY:this.originalClientY+(t.clientY-this.originalClientY)/i}),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run((function(){e.gridster.updateGrid()}))}},{key:"dragStop",value:function(t){var e=this;t.stopPropagation(),t.preventDefault(),it(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeResize.bind(this),this.cancelResize.bind(this)):this.makeResize(),setTimeout((function(){e.gridsterItem.renderer.removeClass(e.gridsterItem.el,"gridster-item-resizing"),e.gridster&&(e.gridster.movingItem=null,e.gridster.previewStyle())}))}},{key:"cancelResize",value:function(){this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}},{key:"makeResize",value:function(){this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}},{key:"handleN",value:function(t){if(this.top=t.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)}},{key:"handleW",value:function(t){if(this.left=t.clientX+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)}},{key:"handleS",value:function(t){if(this.height=t.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)}},{key:"handleE",value:function(t){if(this.width=t.clientX+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)}},{key:"handleNW",value:function(t){this.handleN(t),this.handleW(t)}},{key:"handleNE",value:function(t){this.handleN(t),this.handleE(t)}},{key:"handleSW",value:function(t){this.handleS(t),this.handleW(t)}},{key:"handleSE",value:function(t){this.handleS(t),this.handleE(t)}},{key:"toggle",value:function(){this.resizeEnabled=this.gridsterItem.canBeResized()}},{key:"dragStartDelay",value:function(t){var e=this;if(G.checkTouchEvent(t),this.gridster.$options.resizable.delayStart)var i=setTimeout((function(){e.dragStart(t),l()}),this.gridster.$options.resizable.delayStart),s=this.gridsterItem.renderer.listen("document","mouseup",l),r=this.gridsterItem.renderer.listen("document","mouseleave",l),n=this.gridsterItem.renderer.listen("window","blur",l),o=this.gridsterItem.renderer.listen("document","touchmove",(function(e){G.checkTouchEvent(e),(Math.abs(e.clientX-t.clientX)>9||Math.abs(e.clientY-t.clientY)>9)&&l()})),a=this.gridsterItem.renderer.listen("document","touchend",l),h=this.gridsterItem.renderer.listen("document","touchcancel",l);else this.dragStart(t);function l(){clearTimeout(i),n(),s(),r(),o(),a(),h()}}},{key:"setItemTop",value:function(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,t)}},{key:"setItemLeft",value:function(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,t,this.top)}},{key:"setItemHeight",value:function(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",t+"px")}},{key:"setItemWidth",value:function(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",t+"px")}}]),t}()).\u0275fac=function(t){return new(t||mt)(d["\u0275\u0275inject"](q),d["\u0275\u0275inject"](V),d["\u0275\u0275inject"](d.NgZone))},mt.\u0275prov=d["\u0275\u0275defineInjectable"]({token:mt,factory:mt.\u0275fac}),mt),wt=((ct=function(){function t(e,i,s,r){p(this,t),this.renderer=s,this.zone=r,this.el=e.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=i,this.drag=new yt(this,i,this.zone),this.resize=new bt(this,i,this.zone)}return u(t,[{key:"ngOnInit",value:function(){this.gridster.addItem(this)}},{key:"ngOnChanges",value:function(t){t.item&&(this.updateOptions(),this.init||this.gridster.calculateLayoutDebounce())}},{key:"updateOptions",value:function(){this.$item=G.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}},{key:"ngOnDestroy",value:function(){this.gridster.removeItem(this),delete this.gridster,this.drag.destroy(),delete this.drag,this.resize.destroy(),delete this.resize}},{key:"setSize",value:function(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}},{key:"updateItemSize",value:function(){var t=this.$item.x*this.gridster.curColWidth,e=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,i=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=t,!this.init&&e>0&&i>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),e===this.width&&i===this.height||(this.width=e,this.height=i,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this))}},{key:"itemChanged",value:function(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this)}},{key:"checkItemChanges",value:function(t,e){t.rows===e.rows&&t.cols===e.cols&&t.x===e.x&&t.y===e.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=e.x||0,this.$item.y=e.y||0,this.$item.cols=e.cols||1,this.$item.rows=e.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayoutDebounce(),this.itemChanged()))}},{key:"canBeDragged",value:function(){return!this.gridster.mobile&&(void 0===this.$item.dragEnabled?this.gridster.$options.draggable.enabled:this.$item.dragEnabled)}},{key:"canBeResized",value:function(){return!this.gridster.mobile&&(void 0===this.$item.resizeEnabled?this.gridster.$options.resizable.enabled:this.$item.resizeEnabled)}},{key:"bringToFront",value:function(t){if(!(t&&t<=0)){var e=this.getLayerIndex(),i=this.gridster.$options.maxLayerIndex;if(e<i){var s=t?e+t:i;this.item.layerIndex=this.$item.layerIndex=s>i?i:s}}}},{key:"sendToBack",value:function(t){if(!(t&&t<=0)){var e=this.getLayerIndex();if(e>0){var i=t?e-t:0;this.item.layerIndex=this.$item.layerIndex=i<0?0:i}}}},{key:"getLayerIndex",value:function(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}},{key:"zIndex",get:function(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}}]),t}()).\u0275fac=function(t){return new(t||ct)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](Z),d["\u0275\u0275directiveInject"](d.Renderer2),d["\u0275\u0275directiveInject"](d.NgZone))},ct.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ct,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(t,e){2&t&&d["\u0275\u0275styleProp"]("z-index",e.zIndex)},inputs:{item:"item"},features:[d["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:f,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(d["\u0275\u0275projectionDef"](),d["\u0275\u0275projection"](0),d["\u0275\u0275template"](1,y,1,0,"div",0),d["\u0275\u0275template"](2,v,1,0,"div",1),d["\u0275\u0275template"](3,b,1,0,"div",2),d["\u0275\u0275template"](4,w,1,0,"div",3),d["\u0275\u0275template"](5,I,1,0,"div",4),d["\u0275\u0275template"](6,C,1,0,"div",5),d["\u0275\u0275template"](7,x,1,0,"div",6),d["\u0275\u0275template"](8,$,1,0,"div",7)),2&t&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.s&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.e&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.n&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.w&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.se&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.ne&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.sw&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.nw&&e.resize.resizeEnabled))},directives:[a.l],styles:["gridster-item{-ms-user-select:text;-webkit-user-select:text;background:#fff;box-sizing:border-box;display:none;overflow:hidden;position:absolute;transition:.3s;user-select:text;z-index:1}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-moving,gridster-item.gridster-item-resizing{box-shadow:0 0 5px 5px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);transition:0s;z-index:2}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;left:0;right:0;top:0}.gridster-item-resizable-handler.handle-e{bottom:0;cursor:ew-resize;right:0;top:0;width:10px}.gridster-item-resizable-handler.handle-s{bottom:0;cursor:ns-resize;height:10px;left:0;right:0}.gridster-item-resizable-handler.handle-w{bottom:0;cursor:ew-resize;left:0;top:0;width:10px}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;height:10px;right:0;top:0;width:10px}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;height:10px;left:0;top:0;width:10px}.gridster-item-resizable-handler.handle-se{border-color:rgba(0,0,0,0);border-style:solid;border-width:0 0 10px 10px;bottom:0;cursor:se-resize;height:0;right:0;width:0}.gridster-item-resizable-handler.handle-sw{bottom:0;cursor:sw-resize;height:10px;left:0;width:10px}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:rgba(0,0,0,0) rgba(0,0,0,0) #ccc}"],encapsulation:2}),ct),It=((dt=function(){function t(e,i,s){p(this,t),this.renderer=s,this.el=e.nativeElement,this.gridster=i,this.gridster.previewStyle=this.previewStyle.bind(this)}return u(t,[{key:"ngOnDestroy",value:function(){delete this.el,delete this.gridster.previewStyle,delete this.gridster}},{key:"previewStyle",value:function(t){this.gridster.movingItem?(this.gridster.compact&&t&&this.gridster.compact.checkCompactItem(this.gridster.movingItem),this.renderer.setStyle(this.el,"display","block"),this.gridster.gridRenderer.updateItem(this.el,this.gridster.movingItem,this.renderer)):this.renderer.setStyle(this.el,"display","")}}]),t}()).\u0275fac=function(t){return new(t||dt)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](Z),d["\u0275\u0275directiveInject"](d.Renderer2))},dt.\u0275cmp=d["\u0275\u0275defineComponent"]({type:dt,selectors:[["gridster-preview"]],decls:0,vars:0,template:function(t,e){},styles:["gridster-preview{background:rgba(0,0,0,.15);display:none;position:absolute}"],encapsulation:2}),dt),Ct=((lt=function t(){p(this,t)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:lt}),lt.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||lt)},imports:[[a.c]]}),lt),xt=n("ZTXN"),$t=n("C05f"),kt=n("bwdy"),St=n("HM3f"),zt=n("ROBh"),Tt=n("Ohay"),Pt=n("mWib"),Rt=n("w0kG"),Ot=n("8j5Y"),Et=n("xVbo"),Dt=n("YtkY"),Mt=n("kuMc"),jt=n("wqq/"),Wt=n("TLy2"),Ft={xxs:{maxWidth:599},xs:{minWidth:599,maxWidth:839.98},sm:{minWidth:840,maxWidth:1023.98},md:{minWidth:1024,maxWidth:1439.98},lg:{minWidth:1440,maxWidth:1919.98},xl:{minWidth:1920},xs_up:{minWidth:599.67},sm_up:{minWidth:839.67},md_up:{minWidth:1023.67},lg_up:{minWidth:1439.67},xl_up:{minWidth:1919.67},lg_down:{maxWidth:1919.33},md_down:{maxWidth:1439.33},sm_down:{maxWidth:1023.33},xs_down:{maxWidth:839.33}},Lt={xxs:_t(Ft.xxs),xs:_t(Ft.xs),sm:_t(Ft.sm),md:_t(Ft.md),lg:_t(Ft.lg),xl:_t(Ft.xl),xs_up:_t(Ft.xs_up),sm_up:_t(Ft.sm_up),md_up:_t(Ft.md_up),lg_up:_t(Ft.lg_up),xl_up:_t(Ft.xl_up),lg_down:_t(Ft.lg_down),md_down:_t(Ft.md_down),sm_down:_t(Ft.sm_down),xs_down:_t(Ft.xs_down)};function _t(t){var e="";return void 0!==t.minWidth&&(e.length>0&&(e+=" and "),e+="(min-width: "+t.minWidth+"px)"),void 0!==t.maxWidth&&(e.length>0&&(e+=" and "),e+="(max-width: "+t.maxWidth+"px)"),e}var Vt=n("7ob6"),At=n("DE/k"),Ht=n("gfy7"),Bt=function(t){return"symbol"==typeof t||Object(Ht.a)(t)&&"[object Symbol]"==Object(At.a)(t)},Xt=function(t,e){return t>e},Yt=n("KpjL"),Nt=function(t){return t&&t.length?function(t,e,i){for(var s=-1,r=t.length;++s<r;){var n=t[s],o=e(n);if(null!=o&&(void 0===a?o==o&&!Bt(o):i(o,a)))var a=o,h=n}return h}(t,Yt.a,Xt):void 0},Gt=n("HOZh");function Ut(t,e){}function Jt(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",9),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function Zt(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",10),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function qt(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",11),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function Kt(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",12),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function Qt(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",13),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function te(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",14),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function ee(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",15),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function ie(t,e){if(1&t){var i=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"div",16),d["\u0275\u0275listener"]("mousedown",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)}))("touchstart",(function(t){return d["\u0275\u0275restoreView"](i),d["\u0275\u0275nextContext"]().resize.dragStartDelay(t)})),d["\u0275\u0275elementEnd"]()}}function se(t,e){1&t&&d["\u0275\u0275element"](0,"atlas-dashboard-item",3),2&t&&d["\u0275\u0275property"]("placement",e.$implicit)}function re(t,e){if(1&t&&(d["\u0275\u0275elementStart"](0,"gridster",1),d["\u0275\u0275pipe"](1,"async"),d["\u0275\u0275template"](2,se,1,1,"atlas-dashboard-item",2),d["\u0275\u0275pipe"](3,"async"),d["\u0275\u0275elementEnd"]()),2&t){var i=e.ngIf,s=d["\u0275\u0275nextContext"]();d["\u0275\u0275styleProp"]("height",d["\u0275\u0275pipeBind1"](1,5,s.contentHeightPx$)),d["\u0275\u0275property"]("options",i),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",d["\u0275\u0275pipeBind1"](3,7,s.placements$))("ngForTrackBy",s.placementIdentifier)}}function ne(t){return t+2}function oe(t,e){var i=t.x-e.x;return 0!==i?i:t.y-e.y}function ae(t,e){return Object.assign(Object.assign({},t),{displayOrder:e})}var he,le,de,ce,me,ue,pe,ge,fe,ye,ve,be,we,Ie=((le=function t(e){p(this,t),this.viewContainerRef=e}).\u0275fac=function(t){return new(t||le)(d["\u0275\u0275directiveInject"](d.ViewContainerRef))},le.\u0275dir=d["\u0275\u0275defineDirective"]({type:le,selectors:[["","atlasDashboardItemAnchor",""]]}),le),Ce=((he=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(s,t);var i=l(s);function s(t,r,n,o,a){var h;return p(this,s),(h=i.call(this,t,r,n,o)).componentFactoryResolver=a,h._unsubscribe=new xt.a,h._placement=new xt.a,h._componentInstance=new $t.a(null),h.gridsterItem=!0,h.placement$=h._placement.asObservable(),h.placement$.pipe(Object(Tt.a)(),Object(Pt.a)(650),Object(Rt.a)(h._componentInstance),Object(Ot.a)((function(t){var i=e(t,2),s=i[0],r=i[1];r&&(r.componentType!==(null==s?void 0:s.component)?(r.destroy(),h.hostAnchor.viewContainerRef.clear()):r.instance.updatePlacement(s))})),Object(Et.a)((function(t){var i=e(t,2),s=i[0],r=i[1];return s&&s.component!==(null==r?void 0:r.componentType)})),Object(Dt.a)((function(t){var i=e(t,1)[0];return{placement:i,factory:h.componentFactoryResolver.resolveComponentFactory(i.component)}})),Object(Dt.a)((function(t){var e=t.placement,i=t.factory;return{placement:e,instanceRef:h.hostAnchor.viewContainerRef.createComponent(i)}})),Object(Ot.a)((function(t){var e=t.instanceRef;return h._componentInstance.next(e)})),Object(Ot.a)((function(t){var e=t.placement;return t.instanceRef.instance.updatePlacement(e)})),Object(Ot.a)((function(t){return t.instanceRef.changeDetectorRef.detectChanges()})),Object(Mt.a)(h._unsubscribe)).subscribe(),h}return u(s,[{key:"ngOnDestroy",value:function(){this._placement.next(null),this._unsubscribe.next(),this._unsubscribe.complete(),r(c(s.prototype),"ngOnDestroy",this).call(this)}},{key:"ngOnChanges",value:function(t){r(c(s.prototype),"ngOnChanges",this).call(this,t.placement?Object.assign(Object.assign({},t),{item:t.placement}):t)}},{key:"placement",set:function(t){o(c(s.prototype),"item",t,this,!0),this._placement.next(t)}}]),s}(wt)).\u0275fac=function(t){return new(t||he)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](Z),d["\u0275\u0275directiveInject"](d.Renderer2),d["\u0275\u0275directiveInject"](d.NgZone),d["\u0275\u0275directiveInject"](d.ComponentFactoryResolver))},he.\u0275cmp=d["\u0275\u0275defineComponent"]({type:he,selectors:[["atlas-dashboard-item"]],viewQuery:function(t,e){var i;1&t&&d["\u0275\u0275viewQuery"](Ie,!0),2&t&&d["\u0275\u0275queryRefresh"](i=d["\u0275\u0275loadQuery"]())&&(e.hostAnchor=i.first)},hostVars:2,hostBindings:function(t,e){2&t&&d["\u0275\u0275classProp"]("gridster-item",e.gridsterItem)},inputs:{placement:"placement"},features:[d["\u0275\u0275InheritDefinitionFeature"],d["\u0275\u0275NgOnChangesFeature"]],decls:9,vars:8,consts:[["atlasDashboardItemAnchor",""],["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(d["\u0275\u0275template"](0,Ut,0,0,"ng-template",0),d["\u0275\u0275template"](1,Jt,1,0,"div",1),d["\u0275\u0275template"](2,Zt,1,0,"div",2),d["\u0275\u0275template"](3,qt,1,0,"div",3),d["\u0275\u0275template"](4,Kt,1,0,"div",4),d["\u0275\u0275template"](5,Qt,1,0,"div",5),d["\u0275\u0275template"](6,te,1,0,"div",6),d["\u0275\u0275template"](7,ee,1,0,"div",7),d["\u0275\u0275template"](8,ie,1,0,"div",8)),2&t&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.s&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.e&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.n&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.w&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.se&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.ne&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.sw&&e.resize.resizeEnabled),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",e.gridster.$options.resizable.handles.nw&&e.resize.resizeEnabled))},directives:[Ie,a.l],encapsulation:2}),he),xe=[Lt.xs,Lt.sm,Lt.md,Lt.lg,Lt.xl],$e=[Ft.xs,Ft.sm,Ft.md,Ft.lg,Ft.xl],ke=((me=function(){function i(t){var s=this;p(this,i),this.breakpointObserver=t,this._onDestroySubs=new kt.a,this._columnCount=new $t.a(4),this._cellAspectRatio=new $t.a(.618),this._cellMargin=new $t.a(8),this._rowCount=new $t.a(6),this._placements=new $t.a([]),this._editMode=new $t.a(!1),this.columnCount$=this._columnCount.asObservable(),this.rowCount$=this._rowCount.asObservable(),this.cellAspectRatio$=this._cellAspectRatio.asObservable(),this.cellMargin$=this._cellMargin.asObservable(),this.placements$=this._placements.asObservable(),this.editMode$=this._editMode.asObservable(),this.isMobileWidth$=this.breakpointObserver.observe([Lt.xxs,Lt.xs,Lt.sm]).pipe(Object(Dt.a)((function(t){return t.matches})),Object(Tt.a)(),Object(jt.a)(1)),this.currentBreakpoint$=this.breakpointObserver.observe(xe).pipe(Object(Dt.a)((function(t){return Object.values(t.breakpoints).findIndex(Vt.j)})),Object(Dt.a)((function(t){return $e[-1===t?0:t]})),Object(Tt.a)(),Object(jt.a)(1)),this.columnWidth$=Object(St.a)([this.currentBreakpoint$,this.columnCount$,this.cellMargin$]).pipe(Object(Dt.a)((function(t){var i=e(t,3),s=i[0],r=i[1],n=i[2];return function(t,e,i){return(t-(e+1)*i)/e}((s.minWidth?s.minWidth:s.maxWidth)||Ft.xs.minWidth,r,n)})),Object(Tt.a)(),Object(jt.a)(1)),this.rowHeight$=Object(St.a)([this.columnWidth$,this.cellAspectRatio$]).pipe(Object(Dt.a)((function(t){var i=e(t,2);return i[0]*i[1]})),Object(Tt.a)(),Object(jt.a)(1)),this.minRows$=this.columnCount$.pipe(Object(Dt.a)(ne),Object(Tt.a)(),Object(jt.a)(1)),this.contentHeightPx$=Object(St.a)([this.rowCount$,this.rowHeight$,this.cellMargin$,this.isMobileWidth$]).pipe(Object(Pt.a)(50),Object(Wt.a)((function(t){var i=e(t,4),r=i[0],n=i[1],o=i[2];return i[3]?s.placements$.pipe(Object(Dt.a)((function(t){return[t.length,Nt(t.map((function(t){return t.y+t.rows})))]})),Object(Dt.a)((function(t){var i=e(t,2),s=i[0];return i[1]*n+s*o+2*o}))):Object(zt.a)(r*n+r*o+o)})),Object(Dt.a)((function(t){return"number"==typeof t?t+"px":t})),Object(Tt.a)(),Object(jt.a)(1)),this._syncRowCountWithPlacements(),this._autoRearrageOnColumnCountChange()}return u(i,[{key:"ngOnDestroy",value:function(){this._onDestroySubs.unsubscribe()}},{key:"toggleEditMode",value:function(t){this._editMode.next(null==t?!this._editMode.getValue():t)}},{key:"setColumnCount",value:function(t){this._columnCount.next(t)}},{key:"setRowCount",value:function(t){this._rowCount.next(t)}},{key:"setCellAspectRatio",value:function(t){this._cellAspectRatio.next(t)}},{key:"setCellMargin",value:function(t){this._cellMargin.next(t)}},{key:"setPlacements",value:function(t){this._placements.next(t)}},{key:"addPlacement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._placements.getValue().slice();i=(i=e?i.concat([t]).sort(oe):i.concat([Object.assign(Object.assign({},t),{x:0,y:0})])).map(ae),this._placements.next(i)}},{key:"removePlacement",value:function(t){this._placements.next(this._placements.getValue().filter((function(e){return e!==t})).sort(oe).map(ae))}},{key:"updatePlacement",value:function(t){var e=this._placements.getValue(),i=e.findIndex((function(e){return e.id===t.id}));if(-1===i)this.addPlacement(t);else{var s=e.slice();s.splice(i,1,t),s=s.sort(oe).map(ae),this._placements.next(s)}}},{key:"_syncRowCountWithPlacements",value:function(){var t=this;this._onDestroySubs.add(this.minRows$.pipe(Object(Rt.a)(this.placements$),Object(Ot.a)((function(i){var s=e(i,2),r=s[0],n=s[1];if(!(null==n?void 0:n.length)||r>t._rowCount.getValue())t._rowCount.next(r);else{var o=Nt(n.map((function(t){return t.y+t.rows}))),a=Math.max(o,r);a!==t._rowCount.getValue()&&t._rowCount.next(a)}}))).subscribe())}},{key:"_autoRearrageOnColumnCountChange",value:function(){var i=this;this._onDestroySubs.add(this.columnCount$.pipe(Object(Rt.a)(this.placements$),Object(Et.a)((function(t){var i=e(t,2)[1];return!(!i||!i.length)})),Object(Dt.a)((function(i){var s=e(i,2),r=s[0];return s[1].reduce((function(e,i,s){var n=s?e[s-1]:{id:null,x:0,y:0,cols:0,rows:0,component:null,displayOrder:-1},o=Object.assign(Object.assign({},i),{x:0,y:0,cols:i.cols<=r?i.cols:r});if(n.x+n.cols+o.cols>=r){var a=s?Nt(e.map((function(t){return t.y+t.rows}))):0;o.y=a}else o.y=n.y,o.x=n.x+n.cols;return[].concat(t(e),[o])}),[])})),Object(Ot.a)((function(t){return i.setPlacements(t)}))).subscribe())}}]),i}()).\u0275fac=function(t){return new(t||me)(d["\u0275\u0275inject"](Gt.a))},me.\u0275prov=d["\u0275\u0275defineInjectable"]({token:me,factory:me.\u0275fac}),me),Se=((ce=function(){function t(i,s,r){var n=this;p(this,t),this.el=i,this.dashboardState=s,this.renderer=r,this._onDestroySubs=new kt.a,this._baseLayoutGridOptions={gridType:A.Fit,displayGrid:H.OnDragAndResize,minCols:4,maxCols:4,maxItemCols:4,minRows:6,minItemCols:1,minItemRows:1,mobileBreakpoint:Ft.xs.maxWidth,keepFixedHeightInMobile:!0,outerMargin:!0,outerMarginTop:8,outerMarginBottom:8,outerMarginLeft:8,outerMarginRight:8,margin:8,pushItems:!0,pushResizeItems:!0,swap:!0,initCallback:function(t){return n._gridsterRef=t},itemChangeCallback:function(t){return n.dashboardState.updatePlacement(t)},gridSizeChangedCallback:function(t){return n.dashboardState.setRowCount(t.rows)}},this.placementsChange=new d.EventEmitter,this.layoutConfig$=Object(St.a)([this.dashboardState.editMode$,this.dashboardState.rowHeight$,this.dashboardState.columnCount$,this.dashboardState.minRows$]).pipe(Object(Pt.a)(50),Object(Dt.a)((function(t){var i=e(t,4),s=i[0],r=i[1],o=i[2],a=i[3];return Object.assign(Object.assign({},n._baseLayoutGridOptions),{minRows:a,minCols:o,maxCols:o,maxItemCols:o,fixedRowHeight:r,draggable:{enabled:s},resizable:{enabled:s}})})),Object(Pt.a)(50),Object(Ot.a)((function(){return n._gridsterRef&&n._gridsterRef.options.api&&n._gridsterRef.options.api.optionsChanged()}))),this.placements$=this.dashboardState.placements$.pipe(Object(Dt.a)((function(t){return(null==t?void 0:t.length)?t:[]}))),this.contentHeightPx$=this.dashboardState.contentHeightPx$.pipe(Object(Dt.a)((function(t){return t||"100px"})),Object(Ot.a)((function(t){return console.log("DashboardComponent: contentHeightPx$:",t)}))),this.forwardPlacementsStatesChangeEvent(),this._onDestroySubs.add(this.dashboardState.isMobileWidth$.pipe(Object(Ot.a)(this.toggleHostClass("mobile"))).subscribe())}return u(t,[{key:"ngOnDestroy",value:function(){this._onDestroySubs.unsubscribe()}},{key:"placementIdentifier",value:function(t,e){return e.id}},{key:"onResize",value:function(){var t,e,i;null===(i=null===(e=null===(t=this._gridsterRef)||void 0===t?void 0:t.options)||void 0===e?void 0:e.api)||void 0===i||i.resize()}},{key:"toggleHostClass",value:function(t){var e=this;return function(i){e.renderer[i?"addClass":"removeClass"](e.el.nativeElement,t)}}},{key:"forwardPlacementsStatesChangeEvent",value:function(){var t=this;this._onDestroySubs.add(this.dashboardState.placements$.pipe(Object(Tt.a)(),Object(Dt.a)((function(e){return{source:t,placements:e}})),Object(Ot.a)((function(e){return t.placementsChange.emit(e)}))).subscribe())}},{key:"columnCount",set:function(t){this.dashboardState.setColumnCount(t)}},{key:"cellAspectRatio",set:function(t){this.dashboardState.setCellAspectRatio(t)}},{key:"cellMargin",set:function(t){this.dashboardState.setCellMargin(t)}},{key:"placements",set:function(t){this.dashboardState.setPlacements(t)}},{key:"editMode",set:function(t){this.dashboardState.toggleEditMode(t)}}]),t}()).\u0275fac=function(t){return new(t||ce)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](ke),d["\u0275\u0275directiveInject"](d.Renderer2))},ce.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ce,selectors:[["atlas-dashboard"]],inputs:{columnCount:"columnCount",cellAspectRatio:"cellAspectRatio",cellMargin:"cellMargin",placements:"placements",editMode:"editMode"},outputs:{placementsChange:"placementsChange"},features:[d["\u0275\u0275ProvidersFeature"]([ke])],decls:2,vars:3,consts:[[3,"options","height",4,"ngIf"],[3,"options"],[3,"placement",4,"ngFor","ngForOf","ngForTrackBy"],[3,"placement"]],template:function(t,e){1&t&&(d["\u0275\u0275template"](0,re,4,9,"gridster",0),d["\u0275\u0275pipe"](1,"async")),2&t&&d["\u0275\u0275property"]("ngIf",d["\u0275\u0275pipeBind1"](1,1,e.layoutConfig$))},directives:[a.l,Z,a.k,Ce],pipes:[a.b],encapsulation:2,changeDetection:0}),ce),ze=((de=function(){function t(){p(this,t)}return u(t,null,[{key:"version",value:function(){return"2.0.1"}}]),t}()).\u0275mod=d["\u0275\u0275defineNgModule"]({type:de}),de.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||de)},providers:[],imports:[[a.c,Ct]]}),de),Te=n("PCNd"),Pe=n("sEIs"),Re={title:"Dashboarding",components:[{name:"DashboardComponent",selector:"atlas-dashboard",implements:["OnDestroy"],description:"Displays specified content in a responsive layout grid that can be manipulated by the end-user.",inputs:[{name:"cellAspectRatio",type:"number",description:"(write-only) The aspect ratio of the size of each cell.  The width of the cell is multiplied by this value to calculate the cell height."},{name:"cellMargin",type:"number",description:"(write-only) The number of pixels between the cells of the layout grid."},{name:"columnCount",type:"DashboardColumnCounts",description:"(write-only) The number of vertical columns into which the layout grid is divided."},{name:"editMode",type:"boolean",description:"(write-only) When set to true, enables moving and resizing of placements."},{name:"placements",type:"DashboardItemPlacement[]",description:"(write-only) Specifies the content to be displayed on the layout grid."}],outputs:[{name:"placementsChange",type:"EventEmitter<DashboardPlacementChangeEvent>",description:"Emits when any of the placements on the dashboard changes."}]}],importReferences:["import { DashboardingModule } from '@atlas/ui-dashboarding'","import { DashboardItemPlacement } from '@atlas/ui-dashboarding'","import { DashboardPlacementConsumer } from '@atlas/ui-dashboarding'"],interfaces:[{name:"DashboardItemPlacement<TComponent extends DashboardPlacementConsumer = DashboardPlacementConsumer>",description:"Defines a piece of content and its position and sizing within the dashboard layout grid.",properties:[{name:"id",description:"Uniquely identifies each placement, so that changes to it can be tracked by both the dashboard and the consuming application.",type:"string"},{name:"x",description:"The horizontal coordinate of the position of the placement on the dashboard layout grid.",type:"number"},{name:"y",description:"The vertical coordinate of the position of the placement on the dashboard layout grid.",type:"number"},{name:"cols",description:"The number of columns that the placement spans within the dashboard layout grid. (AKA the width)",type:"number"},{name:"rows",description:"The number of rows that the placement spans within the dashboard layout grid. (AKA the height)",type:"number"},{name:"displayOrder",description:"Used for sorting purposes to keep the array of placements sorted by the position of each placement. NOTE: This will be updated by the dashboard when placement positions change.",type:"number"},{name:"component",description:"The component class to be instantiated and displayed with the specified position and sizing.",type:"Type<TComponent>"},{name:"placementConfig",description:"The configuration or data to be consumed by the component that is displayed in the placement.",type:"{ [key: string]: any; }"}]},{name:"DashboardPlacementConsumer",description:"Defines a contract that enables the dashboard and the displayed content to keep the placement configuration in-sync.  This interface must be implemented by the content component that is to be displayed within a placement.",methods:[{name:"registerOnPlacementChange",description:"Registers a callback to be invoked when the implementing class updates the placement.",type:"void",arguments:[{name:"cb",description:"A callback that is called when the implementing class updates the placement.",type:"(placement: DashboardItemPlacement) => any"}]},{name:"updatePlacement",description:"Called by the dashboard to notify the implementing class of a change to its placement.",type:"void",arguments:[{name:"value",description:"The updated placement.",type:"DashboardItemPlacement"}]}]}]},Oe=n("vfg2"),Ee=((ue=function t(){p(this,t),this.api$=new $t.a(Re)}).\u0275fac=function(t){return new(t||ue)},ue.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ue,selectors:[["atlas-dashboarding-api"]],decls:2,vars:3,consts:[["title","Dashboarding",3,"api"]],template:function(t,e){1&t&&(d["\u0275\u0275element"](0,"atlas-shared-docs-api",0),d["\u0275\u0275pipe"](1,"async")),2&t&&d["\u0275\u0275property"]("api",d["\u0275\u0275pipeBind1"](1,1,e.api$))},directives:[Oe.a],pipes:[a.b],encapsulation:2,changeDetection:0}),ue),De=n("JcM3"),Me=function(){return["summary","api","example"]},je=((pe=function(){function t(){p(this,t)}return u(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||pe)},pe.\u0275cmp=d["\u0275\u0275defineComponent"]({type:pe,selectors:[["atlas-dashboarding-doc"]],decls:2,vars:2,consts:[[3,"options"]],template:function(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"atlas-shared-docs-container",0),d["\u0275\u0275element"](1,"router-outlet"),d["\u0275\u0275elementEnd"]()),2&t&&d["\u0275\u0275property"]("options",d["\u0275\u0275pureFunction0"](1,Me))},directives:[De.a,Pe.m],encapsulation:2,changeDetection:0}),pe),We=n("HLuz"),Fe=n("J1ZJ"),Le=n("RVkH"),_e=n("VYW9"),Ve=n("3mST"),Ae=((ge=function(){function t(e,i){var s=this;p(this,t),this.el=e,this.renderer=i,this._onDestroySubs=new kt.a,this._placement=new $t.a(null),this.placement$=this._placement.asObservable(),this.imageUrl$=this.placement$.pipe(Object(Dt.a)((function(t){var e;return null===(e=null==t?void 0:t.placementConfig)||void 0===e?void 0:e.src}))),this._onDestroySubs.add(this.placement$.pipe(Object(Ve.a)(1),Object(Ot.a)((function(t){return console.log("Dashboard-Image - Placement:",t)}))).subscribe()),this._onDestroySubs.add(this.imageUrl$.pipe(Object(Et.a)(Vt.j),Object(Ot.a)((function(t){return s.renderer.setStyle(s.el.nativeElement,"background-image","url(".concat(t,")"))}))).subscribe())}return u(t,[{key:"ngOnDestroy",value:function(){this._onDestroySubs.unsubscribe()}},{key:"registerOnPlacementChange",value:function(t){this._onDestroySubs.add(this.placement$.pipe(Object(Ot.a)((function(e){return t(e)}))).subscribe())}},{key:"updatePlacement",value:function(t){this._placement.next(t)}}]),t}()).\u0275fac=function(t){return new(t||ge)(d["\u0275\u0275directiveInject"](d.ElementRef),d["\u0275\u0275directiveInject"](d.Renderer2))},ge.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ge,selectors:[["atlas-basic-use-example-content"]],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),ge),He=function(t){return t.angularLogo="assets/angular.png",t.angularMaterialLogo="assets/angular-material.png",t.sassLogo="assets/sass.png",t}({}),Be=((ye=function(){function t(){p(this,t),this._dashboardItems=new $t.a([]),this.dashboardItems$=this._dashboardItems.pipe(Object(Tt.a)())}return u(t,[{key:"ngAfterViewInit",value:function(){this._dashboardItems.next([{id:Object(Vt.d)(),x:0,y:0,cols:2,rows:2,displayOrder:0,component:Ae,placementConfig:{src:He.angularLogo}},{id:Object(Vt.d)(),x:3,y:0,cols:2,rows:2,displayOrder:1,component:Ae,placementConfig:{src:He.angularMaterialLogo}},{id:Object(Vt.d)(),x:6,y:0,cols:2,rows:2,displayOrder:1,component:Ae,placementConfig:{src:He.sassLogo}}])}},{key:"onPlacementsChanged",value:function(t){console.log("basic-use-example.onPlacementsChanged:",t),this._dashboardItems.next(t.placements)}}]),t}()).\u0275fac=function(t){return new(t||ye)},ye.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ye,selectors:[["atlas-basic-use-example"]],decls:2,vars:5,consts:[[3,"columnCount","placements","editMode","placementsChange"]],template:function(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"atlas-dashboard",0),d["\u0275\u0275listener"]("placementsChange",(function(t){return e.onPlacementsChanged(t)})),d["\u0275\u0275pipe"](1,"async"),d["\u0275\u0275elementEnd"]()),2&t&&d["\u0275\u0275property"]("columnCount",8)("placements",d["\u0275\u0275pipeBind1"](1,3,e.dashboardItems$))("editMode",!0)},directives:[Se],pipes:[a.b],encapsulation:2,changeDetection:0}),ye),Xe=((fe=function(){function t(e){p(this,t),this.codeFileService=e,this.basicExample$=new $t.a(null)}return u(t,[{key:"ngOnInit",value:function(){var t=this;this.codeFileService.loadFiles(["assets/example-files/dashboarding/basic-use-example/basic-use-example.component.html","assets/example-files/dashboarding/basic-use-example/basic-use-example.component.ts","assets/example-files/dashboarding/basic-use-example/basic-use-example.component.scss","assets/example-files/dashboarding/basic-use-example-content/basic-use-example-content.component.ts"]).pipe(Object(Ot.a)((function(e){return t.basicExample$.next(e)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||fe)(d["\u0275\u0275directiveInject"](We.a))},fe.\u0275cmp=d["\u0275\u0275defineComponent"]({type:fe,selectors:[["atlas-dashboarding-example"]],decls:7,vars:3,consts:[["title","Dashboarding Example"],[3,"codeExample"]],template:function(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"atlas-shared-docs-example",0),d["\u0275\u0275elementStart"](1,"atlas-code-example",1),d["\u0275\u0275pipe"](2,"async"),d["\u0275\u0275elementStart"](3,"atlas-code-example-header"),d["\u0275\u0275elementStart"](4,"h3"),d["\u0275\u0275text"](5,"Basic Usage"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](6,"atlas-basic-use-example"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("codeExample",d["\u0275\u0275pipeBind1"](2,1,e.basicExample$)))},directives:[Fe.a,Le.a,_e.a,Be],pipes:[a.b],encapsulation:2,changeDetection:0}),fe),Ye=n("ZRBK"),Ne=function(){return["api"]},Ge=[{path:"",component:je,children:[{path:"summary",component:(ve=function(){function t(){p(this,t)}return u(t,[{key:"ngOnInit",value:function(){}}]),t}(),ve.\u0275fac=function(t){return new(t||ve)},ve.\u0275cmp=d["\u0275\u0275defineComponent"]({type:ve,selectors:[["atlas-dashboarding-summary"]],decls:68,vars:2,consts:[["title","Dashboarding"],[1,"compact"],[1,"api-description"],[3,"routerLink"]],template:function(t,e){1&t&&(d["\u0275\u0275elementStart"](0,"atlas-shared-docs-summary",0),d["\u0275\u0275elementStart"](1,"h3",1),d["\u0275\u0275text"](2,"Overview"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"section"),d["\u0275\u0275elementStart"](4,"div",2),d["\u0275\u0275elementStart"](5,"p"),d["\u0275\u0275text"](6," The "),d["\u0275\u0275elementStart"](7,"code"),d["\u0275\u0275text"](8,"@atlas/ui-dashboarding"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](9," package contains a framework of components that aid in displaying and editing dashboards. "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"p"),d["\u0275\u0275text"](11," The primary interfaces between the consuming application and this package are the "),d["\u0275\u0275elementStart"](12,"code"),d["\u0275\u0275text"](13,"atlas-dashboard"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](14," component, the "),d["\u0275\u0275elementStart"](15,"code"),d["\u0275\u0275text"](16,"DashboardItemPlacement"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](17," interface, and the "),d["\u0275\u0275elementStart"](18,"code"),d["\u0275\u0275text"](19,"DashboardPlacementConsumer"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](20," interface. "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"p"),d["\u0275\u0275text"](22," The "),d["\u0275\u0275elementStart"](23,"code"),d["\u0275\u0275text"](24,"atlas-dashboard"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](25," component has several input properties that allow you to modify the behavior, spacing, and sizing of the items placed on a dashboard. One additional input property of note is the "),d["\u0275\u0275elementStart"](26,"code"),d["\u0275\u0275text"](27,"editMode"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](28," input which enables or disables dashboard item moving and resizing. The "),d["\u0275\u0275elementStart"](29,"code"),d["\u0275\u0275text"](30,"placements"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](31," input property is used to pass an array of "),d["\u0275\u0275elementStart"](32,"code"),d["\u0275\u0275text"](33,"DashboardItemPlacement"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](34," objects to the "),d["\u0275\u0275elementStart"](35,"code"),d["\u0275\u0275text"](36,"atlas-dashboard"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](37," component. These placement objects define the components that should be instantiated/displayed and their position and size within the dashboard. There is a "),d["\u0275\u0275elementStart"](38,"code"),d["\u0275\u0275text"](39,"placementConfig"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](40," property, on the "),d["\u0275\u0275elementStart"](41,"code"),d["\u0275\u0275text"](42,"DashboardItemPlacement"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](43," interface, that can be used to provide content specific or arbitrary options/data to the specified component. "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](44,"p"),d["\u0275\u0275text"](45," The components that are specified via "),d["\u0275\u0275elementStart"](46,"code"),d["\u0275\u0275text"](47,"DashboardItemPlacement"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](48," objects must implement the "),d["\u0275\u0275elementStart"](49,"code"),d["\u0275\u0275text"](50,"DashboardPlacementConsumer"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](51," interface, which allows bi-directional communication between the dashboard and the component being placed. "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](52,"p"),d["\u0275\u0275text"](53," When placements are updated on the dashboard by the user, the "),d["\u0275\u0275elementStart"](54,"code"),d["\u0275\u0275text"](55,"atlas-dashboard"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](56," component's "),d["\u0275\u0275elementStart"](57,"code"),d["\u0275\u0275text"](58,"placementsChange"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](59," event emits; specifying the new array of "),d["\u0275\u0275elementStart"](60,"code"),d["\u0275\u0275text"](61,"DashboardItemPlacement"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](62," objects with the latest positioning and sizing changes made by the user. "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](63,"p"),d["\u0275\u0275text"](64,"See the "),d["\u0275\u0275elementStart"](65,"a",3),d["\u0275\u0275text"](66,"API"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](67," page for more details."),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&t&&(d["\u0275\u0275advance"](65),d["\u0275\u0275property"]("routerLink",d["\u0275\u0275pureFunction0"](1,Ne)))},directives:[Ye.a,Pe.k],encapsulation:2,changeDetection:0}),ve)},{path:"api",component:Ee},{path:"example",component:Xe},{path:"**",redirectTo:"summary"}]}],Ue=((we=function t(){p(this,t)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:we}),we.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||we)},imports:[[Pe.l.forChild(Ge)],Pe.l]}),we),Je=((be=function t(){p(this,t)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:be}),be.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||be)},imports:[[a.c,Te.a,ze,Ue]]}),be)}}])}();